grant delete on table "auth"."audit_log_entries" to "service_role";

grant insert on table "auth"."audit_log_entries" to "service_role";

grant references on table "auth"."audit_log_entries" to "service_role";

grant select on table "auth"."audit_log_entries" to "service_role";

grant trigger on table "auth"."audit_log_entries" to "service_role";

grant truncate on table "auth"."audit_log_entries" to "service_role";

grant update on table "auth"."audit_log_entries" to "service_role";

grant delete on table "auth"."flow_state" to "service_role";

grant insert on table "auth"."flow_state" to "service_role";

grant references on table "auth"."flow_state" to "service_role";

grant select on table "auth"."flow_state" to "service_role";

grant trigger on table "auth"."flow_state" to "service_role";

grant truncate on table "auth"."flow_state" to "service_role";

grant update on table "auth"."flow_state" to "service_role";

grant delete on table "auth"."identities" to "service_role";

grant insert on table "auth"."identities" to "service_role";

grant references on table "auth"."identities" to "service_role";

grant select on table "auth"."identities" to "service_role";

grant trigger on table "auth"."identities" to "service_role";

grant truncate on table "auth"."identities" to "service_role";

grant update on table "auth"."identities" to "service_role";

grant delete on table "auth"."instances" to "service_role";

grant insert on table "auth"."instances" to "service_role";

grant references on table "auth"."instances" to "service_role";

grant select on table "auth"."instances" to "service_role";

grant trigger on table "auth"."instances" to "service_role";

grant truncate on table "auth"."instances" to "service_role";

grant update on table "auth"."instances" to "service_role";

grant delete on table "auth"."mfa_amr_claims" to "service_role";

grant insert on table "auth"."mfa_amr_claims" to "service_role";

grant references on table "auth"."mfa_amr_claims" to "service_role";

grant select on table "auth"."mfa_amr_claims" to "service_role";

grant trigger on table "auth"."mfa_amr_claims" to "service_role";

grant truncate on table "auth"."mfa_amr_claims" to "service_role";

grant update on table "auth"."mfa_amr_claims" to "service_role";

grant delete on table "auth"."mfa_challenges" to "service_role";

grant insert on table "auth"."mfa_challenges" to "service_role";

grant references on table "auth"."mfa_challenges" to "service_role";

grant select on table "auth"."mfa_challenges" to "service_role";

grant trigger on table "auth"."mfa_challenges" to "service_role";

grant truncate on table "auth"."mfa_challenges" to "service_role";

grant update on table "auth"."mfa_challenges" to "service_role";

grant delete on table "auth"."mfa_factors" to "service_role";

grant insert on table "auth"."mfa_factors" to "service_role";

grant references on table "auth"."mfa_factors" to "service_role";

grant select on table "auth"."mfa_factors" to "service_role";

grant trigger on table "auth"."mfa_factors" to "service_role";

grant truncate on table "auth"."mfa_factors" to "service_role";

grant update on table "auth"."mfa_factors" to "service_role";

grant delete on table "auth"."one_time_tokens" to "service_role";

grant insert on table "auth"."one_time_tokens" to "service_role";

grant references on table "auth"."one_time_tokens" to "service_role";

grant select on table "auth"."one_time_tokens" to "service_role";

grant trigger on table "auth"."one_time_tokens" to "service_role";

grant truncate on table "auth"."one_time_tokens" to "service_role";

grant update on table "auth"."one_time_tokens" to "service_role";

grant delete on table "auth"."refresh_tokens" to "service_role";

grant insert on table "auth"."refresh_tokens" to "service_role";

grant references on table "auth"."refresh_tokens" to "service_role";

grant select on table "auth"."refresh_tokens" to "service_role";

grant trigger on table "auth"."refresh_tokens" to "service_role";

grant truncate on table "auth"."refresh_tokens" to "service_role";

grant update on table "auth"."refresh_tokens" to "service_role";

grant delete on table "auth"."saml_providers" to "service_role";

grant insert on table "auth"."saml_providers" to "service_role";

grant references on table "auth"."saml_providers" to "service_role";

grant select on table "auth"."saml_providers" to "service_role";

grant trigger on table "auth"."saml_providers" to "service_role";

grant truncate on table "auth"."saml_providers" to "service_role";

grant update on table "auth"."saml_providers" to "service_role";

grant delete on table "auth"."saml_relay_states" to "service_role";

grant insert on table "auth"."saml_relay_states" to "service_role";

grant references on table "auth"."saml_relay_states" to "service_role";

grant select on table "auth"."saml_relay_states" to "service_role";

grant trigger on table "auth"."saml_relay_states" to "service_role";

grant truncate on table "auth"."saml_relay_states" to "service_role";

grant update on table "auth"."saml_relay_states" to "service_role";

grant delete on table "auth"."schema_migrations" to "service_role";

grant insert on table "auth"."schema_migrations" to "service_role";

grant references on table "auth"."schema_migrations" to "service_role";

grant select on table "auth"."schema_migrations" to "service_role";

grant trigger on table "auth"."schema_migrations" to "service_role";

grant truncate on table "auth"."schema_migrations" to "service_role";

grant update on table "auth"."schema_migrations" to "service_role";

grant delete on table "auth"."sessions" to "service_role";

grant insert on table "auth"."sessions" to "service_role";

grant references on table "auth"."sessions" to "service_role";

grant select on table "auth"."sessions" to "service_role";

grant trigger on table "auth"."sessions" to "service_role";

grant truncate on table "auth"."sessions" to "service_role";

grant update on table "auth"."sessions" to "service_role";

grant delete on table "auth"."sso_domains" to "service_role";

grant insert on table "auth"."sso_domains" to "service_role";

grant references on table "auth"."sso_domains" to "service_role";

grant select on table "auth"."sso_domains" to "service_role";

grant trigger on table "auth"."sso_domains" to "service_role";

grant truncate on table "auth"."sso_domains" to "service_role";

grant update on table "auth"."sso_domains" to "service_role";

grant delete on table "auth"."sso_providers" to "service_role";

grant insert on table "auth"."sso_providers" to "service_role";

grant references on table "auth"."sso_providers" to "service_role";

grant select on table "auth"."sso_providers" to "service_role";

grant trigger on table "auth"."sso_providers" to "service_role";

grant truncate on table "auth"."sso_providers" to "service_role";

grant update on table "auth"."sso_providers" to "service_role";

grant select on table "auth"."users" to "anon";

grant select on table "auth"."users" to "authenticated";

grant trigger on table "auth"."users" to "authenticated";

grant delete on table "auth"."users" to "service_role";

grant insert on table "auth"."users" to "service_role";

grant references on table "auth"."users" to "service_role";

grant select on table "auth"."users" to "service_role";

grant trigger on table "auth"."users" to "service_role";

grant truncate on table "auth"."users" to "service_role";

grant update on table "auth"."users" to "service_role";

CREATE TRIGGER create_profile_on_signup AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION create_profile_for_user();

CREATE TRIGGER on_auth_user_created AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION handle_new_user();

CREATE TRIGGER update_profile_on_auth_sign_in AFTER UPDATE OF last_sign_in_at ON auth.users FOR EACH ROW EXECUTE FUNCTION update_profile_on_sign_in();


create policy "Allow public deletes"
on "storage"."objects"
as permissive
for delete
to public
using ((bucket_id = 'reference-images'::text));


create policy "Allow public downloads"
on "storage"."objects"
as permissive
for select
to public
using ((bucket_id = 'reference-images'::text));


create policy "Allow public updates"
on "storage"."objects"
as permissive
for update
to public
using ((bucket_id = 'reference-images'::text));


create policy "Allow public uploads"
on "storage"."objects"
as permissive
for insert
to public
with check ((bucket_id = 'reference-images'::text));


create policy "Enable delete for users based on user_id"
on "storage"."objects"
as permissive
for delete
to authenticated
using ((bucket_id = 'reference-images'::text));


create policy "Enable read access for all users"
on "storage"."objects"
as permissive
for select
to public
using ((bucket_id = 'reference-images'::text));


create policy "Enable update for users based on user_id"
on "storage"."objects"
as permissive
for update
to authenticated
using ((bucket_id = 'reference-images'::text))
with check ((bucket_id = 'reference-images'::text));


create policy "Enable upload for authenticated users"
on "storage"."objects"
as permissive
for insert
to authenticated
with check ((bucket_id = 'reference-images'::text));



